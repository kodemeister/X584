[English](README.md) | **Русский**

# X584

X584 - это графический симулятор советской 4-разрядной микропроцессорной секции [К584ВМ1](https://ru.wikipedia.org/wiki/%D0%9C%D0%B8%D0%BA%D1%80%D0%BE%D0%BF%D1%80%D0%BE%D1%86%D0%B5%D1%81%D1%81%D0%BE%D1%80%D0%BD%D0%B0%D1%8F_%D1%81%D0%B5%D0%BA%D1%86%D0%B8%D1%8F#%D0%A1%D0%B5%D1%80%D0%B8%D1%8F_584) (клон [Texas Instruments SBP0400](https://en.wikipedia.org/wiki/Texas_Instruments_SBP0400)).

![Screenshot](Screenshot.png?raw=true)

## Особенности

* Симуляция 4-х микропроцессорных секций, объединенных в 16-разрядный микропроцессор.
* Редактирование микрокода путем перетаскивания мышью.
* Поддержка полного набора 9-разрядных микроинструкций.
* Отображение и редактирование текущего состояния микропроцессора.
* Встроенный отладчик с поддержкой пошагового выполнения и точек останова.
* Условное выполнение посредством управляющих операторов.

## Установка

Скачайте последнюю версию X584 со страницы [Releases](https://github.com/kodemeister/X584/releases) и запустите установщик для автоматической установки. Вы также можете скачать ZIP-архив, распаковать его в любую папку и запустить `X584.exe`.

## Сборка из исходного кода

### Подготовка

1. Установите RAD Studio 12.
2. Установите Microsoft HTML Help Workshop.
> [!NOTE]
> Похоже, что Microsoft удалила HTML Help Workshop с официального сайта. Вы все еще можете скачать его из [архива Интернета](https://web.archive.org/web/20200918004813/https://download.microsoft.com/download/0/A/9/0A939EF6-E31C-430F-A3DF-DFAE7960D564/htmlhelp.exe) или установить с помощью Chocolatey.
3. Добавьте папку установки HTML Help Workshop (обычно `C:\Program Files (x86)\HTML Help Workshop`) в переменную окружения `PATH`.
4. Установите Inno Setup 6.
5. Добавьте папку установки Inno Setup (обычно `C:\Program Files (x86)\Inno Setup 6`) в переменную окружения `PATH`.

### Сборка компонентов Microsoft Office 2000

Сначала вам нужно скомпилировать компоненты Microsoft Office 2000 из исходного кода, используя современные компиляторы C++ на базе Clang. Это необходимо, поскольку существующие компоненты Microsoft Office 2000, поставляемые вместе с RAD Studio, поддерживают только устаревший 32-разрядный компилятор `BCC32`.

1. Откройте `Dependencies\Office2K\Office2K.cbproj` в RAD Studio.
2. В главном меню выберите `Component > Install Packages...`. Снимите галочку с пакета `Embarcadero C++Builder Office 2000 Servers Package`, затем нажмите `Save`.
3. В окне `Projects` выберите целевую платформу `Windows 32-bit` и конфигурацию сборки `Release`.
4. Нажмите правой кнопкой мыши на `Office2K.bpl` и выберите пункт `Install` из контекстного меню.
5. Если вы также хотите собрать 64-разрядную версию X584, выберите целевую платформу `Windows 64-bit` или `Windows 64-bit (Modern)` и желаемую конфигурацию сборки. Нажмите правой кнопкой мыши на `Office2K.bpl` и выберите пункт `Build` из контекстного меню.

Скомпилированные пакеты будут установлены в общую папку `C:\Users\Public\Documents\Embarcadero\Studio\23.0`.

### Сборка X584

1. Откройте `X584.cbproj` в RAD Studio.
2. RAD Studio может вывести сообщение об ошибке, указывающее, что она не может загрузить пакет `Office2K` или `bcboffice2k290` из-за конфликта между ними. Нажмите `Yes`, чтобы продолжить.
3. В окне `Projects` выберите желаемую целевую платформу и конфигурацию сборки, затем соберите проект.

Скомпилированный исполняемый файл и файл справки CHM будут находиться в папке `<платформа>\<конфигурация>`, например `Win32\Debug`.

### Сборка установщика

1. Соберите проект для нужной целевой платформы, используя конфигурацию сборки `Release`.
2. Запустите скрипт `Installer\Build.bat`.

Созданный установщик будет находиться в папке `<платформа>\Release`, например `Win32\Release`.
